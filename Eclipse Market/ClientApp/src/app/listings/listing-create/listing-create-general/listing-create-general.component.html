<p-toast position="top-right"></p-toast>


<div class="container">
    <div class="row">
        <div class="col-md-3 col-12 p-0">
            <div
                (click)="onSelectListing()"
                [ngClass]="!auctionMode ? 'activeOption listing' :  '' " 
                class="listing mb-3 d-flex justify-content-center align-items-center flex-column">
                <i class="fa fa-tag"></i>
                <label>
                    Обява
                </label>
            </div>
            <div
                (click)="onSelectAuction()"
                [ngClass]="auctionMode ? 'activeOption auction' :  '' " 
                class="auction mb-5 d-flex justify-content-center align-items-center flex-column">
                <i class="fa fa-gavel"></i>
                <label>
                    Търг
                </label>
            </div>
        </div>
        <div class="col-md-9 col-12 px-md-5 px-0">
            <form
            *ngIf="!auctionMode"
            [formGroup]="createListingForm">

                <h4 class="text-center mb-5 mt-3">Създаване на обява</h4>
                <div class="form-floating mb-4">
                    <input type="text"
                            name="title"
                            placeholder="Заглавие"
                            class="form-control"
                            (keyup.enter)="focusableDescription.focus()"
                            formControlName="title">
                    <label for="title" >Заглавие</label>
                    <app-form-errors 
                        [control]="$any(createListingForm).get('title')"
                        [controlName]="'Заглавие'">
                    </app-form-errors>
                </div>
                <div class="form-floating mb-4">
                    <textarea type="text"
                            #focusableDescription
                            (keyup.enter)="focusableLocation.focus()"
                            [(ngModel)]="textAreaValue" 
                            (ngModelChange)="valueChange(textAreaValue)"
                            id="descTextArea"
                            name="description"
                            maxlength="800"
                            placeholder="Описание"
                            class="form-control"
                            formControlName="description"></textarea>
                            <span id="charLeft">Остават ви {{remainingCharacters}} символа</span>
                    <label for="description">Описание</label>
                    <app-form-errors 
                        [control]="$any(createListingForm).get('description')"
                        [controlName]="'Описание'"
                        [min]="'80'">
                    </app-form-errors>
                </div>
                <div class="form-floating mb-4">
                    <input type="text"
                            name="location"
                            #focusableLocation
                            (keyup.enter)="focusableCategory.focus()"
                            placeholder="Локация"
                            class="form-control"
                            formControlName="location">
                    <label for="location">Локация</label>
                    <app-form-errors 
                        [control]="$any(createListingForm).get('location')"
                        [controlName]="'Локация'">
                    </app-form-errors>
                </div>
                <div class="form-floating mb-4">
                    <select 
                        #focusableCategory
                        class="form-select"
                        name="listingCategory"
                        formControlName="listingCategoryId">
                        <option 
                            *ngFor="let category of listingCategories" 
                            value="{{ category.id }}">
                            {{category.title}}
                    </option>
                    </select>
                    <label for="listingCategory">Категория</label>
                    <app-form-errors 
                        [control]="$any(createListingForm).get('listingCategoryId')"
                        [controlName]="'Категория'">
                    </app-form-errors>
                </div>
            
                <div class="d-flex flex-row-reverse">
                    <button 
                        pButton 
                        [disabled]="!createListingForm.valid"
                        type="button"
                        pRipple 
                        label="Продължи" 
                        class="p-button-primary p-2 my-sm-4 my-0"
                        (click)="nextPage()">
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>





<!-- <div class="form-floating mb-4">
    <input type="number"
            id="priceInput"
            name="price"
            placeholder="Цена"
            class="form-control"
            formControlName="price">
    <label for="price">Цена</label>
    <app-form-errors 
        [control]="$any(createListingForm).get('price')"
        [controlName]="'Price'">
    </app-form-errors>
</div> -->